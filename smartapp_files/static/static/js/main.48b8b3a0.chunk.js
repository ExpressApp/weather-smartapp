(this["webpackJsonpbase-app"]=this["webpackJsonpbase-app"]||[]).push([[0],{48:function(e){e.exports=JSON.parse('{"name":"base-app","version":"0.1.4","private":true,"homepage":".","dependencies":{"@sandstormmedia/react-redux-ts-utils":"^1.0.0","@types/classnames":"^2.2.11","@types/lodash.debounce":"^4.0.6","@types/node":"^12.0.0","@types/react":"^16.9.53","@types/react-dom":"^16.9.8","@types/react-redux":"^7.1.16","@types/react-router-dom":"^5.1.7","@types/redux-actions":"^2.6.1","babel-loader":"8.1.0","classnames":"^2.2.6","connected-react-router":"^6.8.0","dayjs":"^1.10.4","sass":"^1.52.2","react":"^17.0.1","react-dom":"^17.0.1","react-redux":"^7.2.2","react-router-dom":"^5.2.0","react-scripts":"4.0.1","redux":"^4.0.5","redux-actions":"^2.6.5","redux-devtools-extension":"^2.13.8","redux-saga":"^1.1.3","reselect":"^4.0.0","smartapp-bridge":"git+ssh://git@gitlab.ccsteam.ru/smartapp/smartapp-bridge.git","typescript":"^4.0.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","storybook":"start-storybook","lint":"eslint ./src"},"eslintConfig":{"extends":["react-app"]},"browserslist":[">0.2%","not dead","not op_mini all"],"devDependencies":{"@storybook/addon-actions":"^6.1.15","@storybook/addon-info":"^5.3.21","@storybook/addon-links":"^6.1.15","@storybook/react":"^6.4.19","check-dependencies":"^1.1.0","react-docgen-typescript-loader":"^3.7.2"}}')},64:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(27),s=n.n(r),i=n(11),o=n(22),l=(n(64),n(31)),u=n(21),d=n(24),j=n.n(d),b=n(47),p=n.n(b),O=(n(72),n.p+"static/media/iconClose.12207cd1.svg"),v=n.p+"static/media/iconCloseRound.1c4d5cb3.svg",h=n.p+"static/media/iconCloudyDay.0059aebf.svg",m=n.p+"static/media/iconRainyDay.7e609283.svg",f=n.p+"static/media/iconSnowfall.282e3f04.svg",x=n.p+"static/media/iconSunny.49cd5281.svg",_=n(17),w=Object(_.a)([function(e){return e.weatherApp.weather}],(function(e){return e})),y=Object(_.a)([function(e){return e.weatherApp.cities}],(function(e){return e})),g=Object(_.a)([function(e){return e.weatherApp.city}],(function(e){return e})),N=Object(_.a)([function(e){return e.weatherApp.openSearch}],(function(e){return e})),S=n(100),k="SET_OPEN_SEARCH",E="LOAD_WEATHER",C="LOAD_WEATHER_SUCCESS",A="LOAD_CITIES",T="LOAD_CITIES_SUCCESS",L="LOAD_CITY_SUCCESS",D="LOAD_INITIAL_STATE",I=Object(S.a)(k,(function(e){return e})),R=Object(S.a)(E,(function(e){return e})),W=Object(S.a)(C,(function(e){return e})),B=Object(S.a)(A,(function(e){return e})),F=Object(S.a)(L,(function(e){return e})),H=Object(S.a)(T,(function(e){return e})),J=Object(S.a)(D),K=(n(73),Object(_.a)([function(e){return e.ui.topLoader}],(function(e){return e}))),M=Object(_.a)([function(e){return e.ui.mainLoader}],(function(e){return e})),P=n(2);function U(){var e=Object(i.e)(K),t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),O=p[0],v=p[1],h=Object(a.useRef)(null),m=Object(a.useRef)(null);return Object(a.useEffect)((function(){e&&!c&&r(!0),!e&&c&&(r(!1),d(!0),h.current=setTimeout((function(){v(!0),m.current=setTimeout((function(){d(!1),v(!1)}),100)}),200))}),[e,c]),Object(a.useEffect)((function(){return function(){h.current&&clearTimeout(h.current),m.current&&clearTimeout(m.current)}}),[]),Object(P.jsx)("div",{className:j()({"top-loader":!0,"top-loader--enabled":c&&!O}),children:Object(P.jsx)("div",{className:j()({"top-loader__bar":!0,"top-loader__bar--start":c,"top-loader__bar--stop":l,"top-loader__bar--finish":O})})})}n(75);function Y(){return Object(i.e)(M)?Object(P.jsx)("div",{className:"main-loader",children:Object(P.jsxs)("div",{className:"main-loader__spinner",children:[Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{})]})}):null}var q=n(48);function z(){var e=c.a.useState(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=c.a.useRef(),o=Object(i.d)(),l=Object(i.e)(w),d=Object(i.e)(y),b=Object(i.e)(g),_=Object(i.e)(N);Object(a.useEffect)((function(){o(J()),console.log("Weather App v".concat(q.version))}),[o]),Object(a.useEffect)((function(){var e;_&&(null===s||void 0===s||null===(e=s.current)||void 0===e||e.focus())}),[_]);var S=p()((function(e){var t=e.target.value;t.length>=3&&!n.includes(t)&&o(B(t)),r(t)}),1e3,{leading:!0}),k=function(){!b&&_||(n.length||o(H([])),o(I(!_)))},E=function(){r(""),o(H([]))};return Object(P.jsxs)("div",{className:"app",children:[Object(P.jsx)(U,{}),Object(P.jsx)("header",{className:"app__header",children:Object(P.jsx)("button",{className:"app__btn-menu app__btn-menu--dotted",onClick:k,children:Object(P.jsx)("span",{className:"sr-only",children:"Open menu"})})}),Object(P.jsx)("main",{className:"app__main",children:b&&l&&Object(P.jsxs)("section",{className:"weather",children:[Object(P.jsx)("img",{className:"weather__icon",src:function(e){var t=e.toLowerCase();switch(!0){case t.includes("sun")||t.includes("clear"):return x;case t.includes("rain"):return m;case t.includes("snow")||t.includes("sleet"):return f;default:return h}}(l.text),alt:""}),Object(P.jsx)("strong",{className:"weather__title",children:l.text}),b&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("span",{className:"weather__location",children:b}),Object(P.jsx)("div",{className:"weather__info",children:Object(P.jsxs)("div",{className:"weather-info",children:[Object(P.jsxs)("div",{className:"weather-info__item",children:[Object(P.jsxs)("strong",{className:"weather-info__title",children:[l.temp||0,"\xb0"]}),Object(P.jsx)("span",{className:"weather-info__desc",children:"Feels like"})]}),l.wind&&Object(P.jsxs)("div",{className:"weather-info__item",children:[Object(P.jsxs)("strong",{className:"weather-info__title",children:[l.wind," km/h"]}),Object(P.jsx)("span",{className:"weather-info__desc",children:"Wind speed"})]})]})})]})]})}),Object(P.jsx)("aside",{className:j()({app__aside:!0,"app__aside--show":_}),children:Object(P.jsxs)("section",{className:"weather-search",children:[Object(P.jsxs)("header",{className:"weather-search__header",children:[Object(P.jsx)("strong",{className:"weather-search__title",children:"Choose city"}),Object(P.jsx)("button",{className:"app__btn-menu weather-search__btn-close",onClick:k,children:Object(P.jsx)("img",{width:18,height:18,src:O,alt:"close"})})]}),Object(P.jsxs)("div",{className:"weather-search-input",children:[Object(P.jsx)("input",{ref:s,onChange:S,onKeyDown:function(e){"Enter"===e.key&&o(B(n))},className:"weather-search-input__field",placeholder:"Search",autoFocus:!0,value:n}),!!n.length&&Object(P.jsx)("button",{onClick:E,className:"app__btn-menu weather-search-input__btn-clear",children:Object(P.jsx)("img",{width:14,height:14,src:v,alt:"close"})})]}),Object(P.jsx)("ul",{className:"weather-search-suggestion",children:d.map((function(e){return Object(P.jsx)("li",{onClick:function(){var t;t=null===e||void 0===e?void 0:e.name,o(R(t)),E(),k()},className:"weather-search-suggestion__item",children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})]})}),Object(P.jsx)(Y,{})]})}function G(){return Object(P.jsx)(l.c,{children:Object(P.jsx)(l.a,{path:"/",children:Object(P.jsx)(z,{})})})}var Q,V,X=n(15),Z=n(45),$=n(49),ee=n(55),te=n(50),ne=Object(te.a)(),ae=n(7),ce=n(6),re=n(99),se=(Q={},Object(ae.a)(Q,E,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{city:n,weather:{temp:null,wind:null,text:""}})})),Object(ae.a)(Q,C,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{weather:Object(ce.a)({},n)})})),Object(ae.a)(Q,T,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{cities:n})})),Object(ae.a)(Q,L,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{city:n})})),Object(ae.a)(Q,k,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{openSearch:n})})),Q),ie=Object(re.a)(se,{cities:[],weather:{temp:null,wind:null,text:""},city:null,openSearch:!1}),oe="SET_TOP_LOADER",le="SET_MAIN_LOADER",ue=Object(S.a)(oe,(function(e){return e})),de=Object(S.a)(le,(function(e){return e})),je=(V={},Object(ae.a)(V,oe,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{topLoader:n})})),Object(ae.a)(V,le,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},e),{},{mainLoader:n})})),V),be=Object(re.a)(je,{topLoader:!1,mainLoader:!1}),pe=Object(X.combineReducers)({weatherApp:ie,ui:be,router:Object(o.b)(ne)}),Oe=n(14),ve=n(9),he=n(12),me="current_weather",fe="cities_autocomplete",xe="initial_state",_e="ready",we=Object(Oe.a)().mark(Se),ye=Object(Oe.a)().mark(ke),ge=Object(Oe.a)().mark(Ee),Ne=Object(Oe.a)().mark(Ce);function Se(e){var t,n,a,c,r,s,i,o,l,u,d,j,b,p,O,v,h,m,f;return Object(Oe.a)().wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,x.prev=1,x.next=4,Object(ve.c)(de(!0));case 4:return x.next=6,null===he.a||void 0===he.a?void 0:he.a.sendBotEvent({method:me,params:{city:t}});case 6:return m=x.sent,f={temp:(null===m||void 0===m||null===(n=m.payload)||void 0===n||null===(a=n.result)||void 0===a||null===(c=a.weather)||void 0===c?void 0:c.temp_c)||(null===m||void 0===m||null===(r=m.payload)||void 0===r||null===(s=r.result)||void 0===s||null===(i=s.weather)||void 0===i?void 0:i.tempC)||null,wind:(null===m||void 0===m||null===(o=m.payload)||void 0===o||null===(l=o.result)||void 0===l||null===(u=l.weather)||void 0===u?void 0:u.wind_kph)||(null===m||void 0===m||null===(d=m.payload)||void 0===d||null===(j=d.result)||void 0===j||null===(b=j.weather)||void 0===b?void 0:b.windKph)||null,text:(null===m||void 0===m||null===(p=m.payload)||void 0===p||null===(O=p.result)||void 0===O||null===(v=O.weather)||void 0===v||null===(h=v.condition)||void 0===h?void 0:h.text)||""},x.next=10,Object(ve.c)(W(f));case 10:return x.next=12,Object(ve.c)(H([]));case 12:return x.next=14,Object(ve.c)(I(!1));case 14:x.next=19;break;case 16:x.prev=16,x.t0=x.catch(1),console.error("loadWeatherSaga error: ".concat(x.t0));case 19:return x.prev=19,x.next=22,Object(ve.c)(de(!1));case 22:return x.finish(19);case 23:case"end":return x.stop()}}),we,null,[[1,16,19,23]])}function ke(e){var t,n,a,c;return Object(Oe.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(ve.c)(ue(!0));case 4:return r.next=6,null===he.a||void 0===he.a?void 0:he.a.sendBotEvent({method:fe,params:{city:t}});case 6:return c=r.sent,r.next=9,Object(ve.c)(H((null===(n=c.payload)||void 0===n||null===(a=n.result)||void 0===a?void 0:a.cities)||[]));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),console.error("loadCitiesSaga error: ".concat(r.t0));case 14:return r.prev=14,r.next=17,Object(ve.c)(ue(!1));case 17:return r.finish(14);case 18:case"end":return r.stop()}}),ye,null,[[1,11,14,18]])}function Ee(){var e,t,n,a,c,r,s,i,o,l,u,d,j,b,p,O,v,h,m,f;return Object(Oe.a)().wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,Object(ve.c)(de(!0));case 3:return null===he.a||void 0===he.a||he.a.sendClientEvent({method:_e,params:{}}),x.next=6,null===he.a||void 0===he.a?void 0:he.a.sendBotEvent({method:xe,params:{},timeout:3e3});case 6:if(m=x.sent,null!==(e=m.payload)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&t.city){x.next=11;break}return x.next=10,Object(ve.c)(I(!0));case 10:return x.abrupt("return");case 11:return f={temp:(null===m||void 0===m||null===(n=m.payload)||void 0===n||null===(a=n.result)||void 0===a||null===(c=a.weather)||void 0===c?void 0:c.temp_c)||(null===m||void 0===m||null===(r=m.payload)||void 0===r||null===(s=r.result)||void 0===s||null===(i=s.weather)||void 0===i?void 0:i.tempC)||null,wind:(null===m||void 0===m||null===(o=m.payload)||void 0===o||null===(l=o.result)||void 0===l||null===(u=l.weather)||void 0===u?void 0:u.wind_kph)||(null===m||void 0===m||null===(d=m.payload)||void 0===d||null===(j=d.result)||void 0===j||null===(b=j.weather)||void 0===b?void 0:b.windKph)||null,text:(null===(p=m.payload)||void 0===p||null===(O=p.result)||void 0===O?void 0:O.weather.condition.text)||""},x.next=14,Object(ve.c)(F(null===(v=m.payload)||void 0===v||null===(h=v.result)||void 0===h?void 0:h.city));case 14:return x.next=16,Object(ve.c)(W(f));case 16:x.next=23;break;case 18:return x.prev=18,x.t0=x.catch(0),console.error("loadInitialStateSaga error: ",x.t0),x.next=23,Object(ve.c)(I(!0));case 23:return x.prev=23,x.next=26,Object(ve.c)(de(!1));case 26:return x.finish(23);case 27:case"end":return x.stop()}}),ge,null,[[0,18,23,27]])}function Ce(){return Object(Oe.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.a)([Object(ve.d)(E,Se),Object(ve.d)(A,ke),Object(ve.d)(D,Ee)]);case 2:case"end":return e.stop()}}),Ne)}var Ae=Object(Oe.a)().mark(Te);function Te(){return Object(Oe.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.a)([Object(ve.b)(Ce)]);case 2:case"end":return e.stop()}}),Ae)}var Le=Te;var De=function(e){var t=Object(ee.a)(),n=Object(Z.a)(ne),a=Object(X.createStore)(pe,e,Object($.composeWithDevTools)(Object(X.applyMiddleware)(t,n)));return t.run(Le).toPromise().catch((function(e){return console.error("Saga error",e)})),a}();s.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(i.a,{store:De,children:Object(P.jsx)(o.a,{history:ne,children:Object(P.jsx)(G,{})})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.48b8b3a0.chunk.js.map